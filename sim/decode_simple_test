#! /usr/bin/vvp
:ivl_version "11.0 (stable)";
:ivl_delay_selection "TYPICAL";
:vpi_time_precision - 12;
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/system.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/vhdl_sys.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/vhdl_textio.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/v2005_math.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/va_math.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/v2009.vpi";
S_0x5818f44767f0 .scope package, "$unit" "$unit" 2 1;
 .timescale 0 0;
S_0x5818f4476980 .scope module, "decode_simple_test" "decode_simple_test" 3 4;
 .timescale -9 -12;
v0x5818f4446350_0 .var "alu_op", 3 0;
v0x5818f44467b0_0 .var "clk", 0 0;
v0x5818f4446ba0_0 .var "condition", 3 0;
v0x5818f44a2e40_0 .var "flush", 0 0;
v0x5818f44a2f00_0 .var "imm_en", 0 0;
v0x5818f44a2fc0_0 .var "immediate", 11 0;
v0x5818f44a30a0_0 .var "instr_valid", 0 0;
v0x5818f44a3160_0 .var "instruction", 31 0;
v0x5818f44a3240_0 .var "pc_in", 31 0;
v0x5818f44a3320_0 .var "rd", 3 0;
v0x5818f44a3400_0 .var "rm", 3 0;
v0x5818f44a34e0_0 .var "rn", 3 0;
v0x5818f44a35c0_0 .var "rst_n", 0 0;
v0x5818f44a3680_0 .var "stall", 0 0;
v0x5818f44a3740_0 .var "thumb_mode", 0 0;
E_0x5818f4445500 .event posedge, v0x5818f44467b0_0;
    .scope S_0x5818f4476980;
T_0 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x5818f44467b0_0, 0, 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x5818f44a35c0_0, 0, 1;
    %pushi/vec4 3818913793, 0, 32;
    %store/vec4 v0x5818f44a3160_0, 0, 32;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x5818f44a3240_0, 0, 32;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x5818f44a30a0_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x5818f44a3680_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x5818f44a2e40_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x5818f44a3740_0, 0, 1;
    %end;
    .thread T_0, $init;
    .scope S_0x5818f4476980;
T_1 ;
    %delay 5000, 0;
    %load/vec4 v0x5818f44467b0_0;
    %inv;
    %store/vec4 v0x5818f44467b0_0, 0, 1;
    %jmp T_1;
    .thread T_1;
    .scope S_0x5818f4476980;
T_2 ;
    %vpi_call/w 3 31 "$dumpfile", "decode_simple_test.vcd" {0 0 0};
    %vpi_call/w 3 32 "$dumpvars", 32'sb00000000000000000000000000000000, S_0x5818f4476980 {0 0 0};
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x5818f44a35c0_0, 0, 1;
    %pushi/vec4 2, 0, 32;
T_2.0 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_2.1, 5;
    %jmp/1 T_2.1, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x5818f4445500;
    %jmp T_2.0;
T_2.1 ;
    %pop/vec4 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x5818f44a35c0_0, 0, 1;
    %pushi/vec4 2, 0, 32;
T_2.2 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_2.3, 5;
    %jmp/1 T_2.3, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x5818f4445500;
    %jmp T_2.2;
T_2.3 ;
    %pop/vec4 1;
    %vpi_call/w 3 40 "$display", "=== Simple Decode Test ===" {0 0 0};
    %pushi/vec4 3818913793, 0, 32;
    %store/vec4 v0x5818f44a3160_0, 0, 32;
    %wait E_0x5818f4445500;
    %load/vec4 v0x5818f44a3160_0;
    %parti/s 4, 28, 6;
    %store/vec4 v0x5818f4446ba0_0, 0, 4;
    %load/vec4 v0x5818f44a3160_0;
    %parti/s 4, 21, 6;
    %store/vec4 v0x5818f4446350_0, 0, 4;
    %load/vec4 v0x5818f44a3160_0;
    %parti/s 4, 12, 5;
    %store/vec4 v0x5818f44a3320_0, 0, 4;
    %load/vec4 v0x5818f44a3160_0;
    %parti/s 12, 0, 2;
    %store/vec4 v0x5818f44a2fc0_0, 0, 12;
    %load/vec4 v0x5818f44a3160_0;
    %parti/s 1, 25, 6;
    %store/vec4 v0x5818f44a2f00_0, 0, 1;
    %vpi_call/w 3 53 "$display", "MOV R0, #1 (0x%08x):", v0x5818f44a3160_0 {0 0 0};
    %vpi_call/w 3 54 "$display", "  Condition: 0x%x (AL=%x)", v0x5818f4446ba0_0, 4'b1110 {0 0 0};
    %vpi_call/w 3 55 "$display", "  ALU Op: 0x%x (MOV=%x)", v0x5818f4446350_0, 4'b1101 {0 0 0};
    %vpi_call/w 3 56 "$display", "  Rd: 0x%x (R0=%x)", v0x5818f44a3320_0, 4'b0000 {0 0 0};
    %vpi_call/w 3 57 "$display", "  Immediate: 0x%03x", v0x5818f44a2fc0_0 {0 0 0};
    %vpi_call/w 3 58 "$display", "  Imm Enable: %b", v0x5818f44a2f00_0 {0 0 0};
    %load/vec4 v0x5818f4446ba0_0;
    %pushi/vec4 14, 0, 4;
    %cmp/e;
    %flag_get/vec4 4;
    %load/vec4 v0x5818f4446350_0;
    %pushi/vec4 13, 0, 4;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %load/vec4 v0x5818f44a3320_0;
    %pushi/vec4 0, 0, 4;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %load/vec4 v0x5818f44a2fc0_0;
    %pushi/vec4 1, 0, 12;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %load/vec4 v0x5818f44a2f00_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %flag_set/vec4 8;
    %jmp/0xz  T_2.4, 8;
    %vpi_call/w 3 62 "$display", "  \342\234\205 PASS - Instruction decoded correctly" {0 0 0};
    %jmp T_2.5;
T_2.4 ;
    %vpi_call/w 3 64 "$display", "  \342\235\214 FAIL - Instruction decode error" {0 0 0};
T_2.5 ;
    %vpi_call/w 3 67 "$display", "\000" {0 0 0};
    %pushi/vec4 3766493185, 0, 32;
    %store/vec4 v0x5818f44a3160_0, 0, 32;
    %wait E_0x5818f4445500;
    %load/vec4 v0x5818f44a3160_0;
    %parti/s 4, 28, 6;
    %store/vec4 v0x5818f4446ba0_0, 0, 4;
    %load/vec4 v0x5818f44a3160_0;
    %parti/s 4, 21, 6;
    %store/vec4 v0x5818f4446350_0, 0, 4;
    %load/vec4 v0x5818f44a3160_0;
    %parti/s 4, 12, 5;
    %store/vec4 v0x5818f44a3320_0, 0, 4;
    %load/vec4 v0x5818f44a3160_0;
    %parti/s 4, 16, 6;
    %store/vec4 v0x5818f44a34e0_0, 0, 4;
    %load/vec4 v0x5818f44a3160_0;
    %parti/s 4, 0, 2;
    %store/vec4 v0x5818f44a3400_0, 0, 4;
    %load/vec4 v0x5818f44a3160_0;
    %parti/s 1, 25, 6;
    %store/vec4 v0x5818f44a2f00_0, 0, 1;
    %vpi_call/w 3 80 "$display", "ADD R2, R0, R1 (0x%08x):", v0x5818f44a3160_0 {0 0 0};
    %vpi_call/w 3 81 "$display", "  Condition: 0x%x (AL=%x)", v0x5818f4446ba0_0, 4'b1110 {0 0 0};
    %vpi_call/w 3 82 "$display", "  ALU Op: 0x%x (ADD=%x)", v0x5818f4446350_0, 4'b0100 {0 0 0};
    %vpi_call/w 3 83 "$display", "  Rd: 0x%x (R2=%x)", v0x5818f44a3320_0, 4'b0010 {0 0 0};
    %vpi_call/w 3 84 "$display", "  Rn: 0x%x (R0=%x)", v0x5818f44a34e0_0, 4'b0000 {0 0 0};
    %vpi_call/w 3 85 "$display", "  Rm: 0x%x (R1=%x)", v0x5818f44a3400_0, 4'b0001 {0 0 0};
    %vpi_call/w 3 86 "$display", "  Imm Enable: %b", v0x5818f44a2f00_0 {0 0 0};
    %load/vec4 v0x5818f4446ba0_0;
    %pushi/vec4 14, 0, 4;
    %cmp/e;
    %flag_get/vec4 4;
    %load/vec4 v0x5818f4446350_0;
    %pushi/vec4 4, 0, 4;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %load/vec4 v0x5818f44a3320_0;
    %pushi/vec4 2, 0, 4;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %load/vec4 v0x5818f44a34e0_0;
    %pushi/vec4 0, 0, 4;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %load/vec4 v0x5818f44a3400_0;
    %pushi/vec4 1, 0, 4;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %load/vec4 v0x5818f44a2f00_0;
    %pushi/vec4 0, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %flag_set/vec4 8;
    %jmp/0xz  T_2.6, 8;
    %vpi_call/w 3 90 "$display", "  \342\234\205 PASS - Instruction decoded correctly" {0 0 0};
    %jmp T_2.7;
T_2.6 ;
    %vpi_call/w 3 92 "$display", "  \342\235\214 FAIL - Instruction decode error" {0 0 0};
T_2.7 ;
    %vpi_call/w 3 95 "$display", "=== Simple Decode Test Complete ===" {0 0 0};
    %vpi_call/w 3 96 "$finish" {0 0 0};
    %end;
    .thread T_2;
# The file index is used to find the file name in the following table.
:file_names 4;
    "N/A";
    "<interactive>";
    "-";
    "decode_simple_test.sv";
